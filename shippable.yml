# language setting
language: ruby

#version numbers
rvm:
  - 2.1.4

services:
  - postgres

env:
  - CI_REPORTS=shippable/testresults COVERAGE_REPORTS=shippable/codecoverage DATABASE_URL=postgres://postgres@localhost/ride_with_me_test

before_install:
  - "curl -o /tmp/chromedriver.zip -L http://chromedriver.storage.googleapis.com/2.10/chromedriver_linux64.zip"
  - "unzip /tmp/chromedriver.zip -d /home/shippable/bin"
  - "chmod +x /home/shippable/bin/chromedriver"
  - "echo '#!/bin/bash' | sudo tee /usr/bin/google-chrome"
  - "echo 'exec /usr/bin/chrome --no-sandbox --disable-gpu \"$@\"' | sudo tee -a /usr/bin/google-chrome"

before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - RAILS_ENV=test bundle exec rake db:create

script:
  "bundle exec rspec"
